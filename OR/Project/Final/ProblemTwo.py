import numpy as np

demand = [[0,0,0,0,0],[153671,143543,137963,242349,187930],[113780,136334,131445,227383,180677],[144958,137176,123900,240497,184143],[112831,128612,120061,183559,144171],[69651,86305,71803,116771,87458],[63053,80685,69876,108356,83499],[60858,78485,71439,114834,90659],[84081,101392,81492,120853,93456],[36295,45315,32515,65120,48518],[34084,43324,29208,52000,50611],[53409,41516,30391,53390,47260],[34308,42293,29016,63564,48618],[34479,43170,28997,63560,49091],[39444,44076,30501,64355,50568],[32892,42824,28481,61799,48215],[30404,33583,29266,54496,48125]]

C = np.matrix([[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0] 
,[0,0,90,90,180,90,90,90,60,90,165,180,120,180,90,60,45]
,[0,60,0,60,150,90,105,75,105,60,90,180,120,45,30,105,80]
,[0,90,45,0,120,60,105,30,90,90,90,180,105,90,60,60,90]
,[0,60,60,60,0,60,90,75,60,45,60,150,30,15,30,75,75]
,[0,140,120,120,210,0,120,75,120,120,180,240,180,180,120,90,120]
,[0,150,90,90,115,30,0,90,30,90,90,180,150,120,90,90,30]
,[0,120,120,90,210,30,105,0,60,30,120,210,210,210,120,75,120]
,[0,120,105,90,180,30,150,105,0,90,105,180,180,180,90,110,120]
,[0,120,90,60,150,30,105,90,60,0,120,180,120,120,90,75,105]
,[0,60,120,120,120,60,90,60,60,60,0,180,120,120,90,60,90]
,[0,30,60,60,15,30,30,30,30,30,30,0,30,30,30,30,30]
,[0,90,90,120,120,30,30,30,30,30,60,180,0,90,60,90,30]
,[0,90,75,60,105,75,90,75,15,60,75,90,120,0,45,90,75]
,[0,90,30,90,120,90,105,45,90,30,90,180,105,120,0,90,90]
,[0,45,60,90,180,45,90,75,45,60,120,180,150,180,105,0,60]
,[0,60,75,90,120,45,120,90,45,90,120,180,60,150,90,75,0]])

averageDemand = []
N = 50


Paths = [[1,16,12,6,8,5,7,9,3,14,2,13,11,4,10,15]
,[5,7,9,3,2,14,6]
,[4,13,10,15,1,16,12,8,11]]

S = [4200,2100,2100]

sIter = 0

for d in demand:
		sum = 0
		for cell in d:
			sum += cell*.2
		averageDemand.append( sum*1000/N  )
	

for Path in Paths:
	
	s = S[sIter]
	sIter += 1
	
	
	inventory = np.zeros( (len( averageDemand),N+1 ) )
	batches = np.zeros( (len( averageDemand),N))
	
	for i in Path:
		for j in range(N):
			batches[i,j] = max( np.ceil( ( averageDemand[i] - inventory[i,j] ) / s ), 0 )
			inventory[i,j+1] = inventory[i,j] + batches[i,j]*s - averageDemand[i]
			
	
			
	timeSpent = np.zeros( len( averageDemand ) )
	for i in Path:
		for j in range( N ):
			timeSpent[i] += batches[i,j]
		timeSpent[i] /= N
		
	#print( timeSpent )
	
	totalTime = C[Path[-1],Path[0]]
	for i in range( 1,len( Path ) ):
		totalTime += C[Path[i-1],Path[i]]
	print( "Setup Time for path: " + str( Path ) + " is: " + str(totalTime ))
	
	for i in range( len( averageDemand ) ):
		totalTime += timeSpent[i]
	
	
	print( "Average Time for path: " + str(Path) + " is: " + str(totalTime ))
	